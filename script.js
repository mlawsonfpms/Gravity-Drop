// --- 1. DATA DEFINITIONS ---
// ... (omitting here for brevity, would include full finalized JS code above) ...
